<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WA Spammer Pro</title>
  <link rel="stylesheet" href="popup.css" />
</head>
<body>
  <div class="container">
    <header class="header-row" role="banner">
      <h1 class="title">WA Spammer Pro</h1>

      <div class="theme-control">
        <label class="switch" for="themeToggle">Theme</label>
        <input type="checkbox" id="themeToggle" aria-label="Toggle light and dark theme" />
      </div>
    </header>

    <nav class="tab-buttons" role="tablist" aria-label="Message mode tabs">
      <button id="tab1Btn" class="tab-btn active" role="tab" aria-controls="tab1" aria-selected="true">Type Message</button>
      <button id="tab2Btn" class="tab-btn" role="tab" aria-controls="tab2" aria-selected="false">Multiple Spam Message</button>
    </nav>

    <main class="tabs">
      <section id="tab1" class="tab-content active" role="tabpanel" aria-labelledby="tab1Btn">
        <label for="msgBox" class="field-label">1. Type Message</label>
        <textarea id="msgBox" placeholder="Type your message — each line will be sent as a separate message" aria-label="Type message"></textarea>
        <button id="sendBtn1" class="action-btn" title="Send messages line by line">🚀 Send Spam</button>
      </section>

      <section id="tab2" class="tab-content" role="tabpanel" aria-labelledby="tab2Btn" hidden>
        <label for="msgBox2" class="field-label">2. Type Message</label>
        <textarea id="msgBox2" placeholder="Type your single message here" aria-label="Message to repeat"></textarea>

        <label for="msgCount" class="field-label">How many times to send?</label>
        <input id="msgCount" type="number" min="1" placeholder="Enter a number" aria-label="Number of times to send" />

        <button id="sendBtn2" class="action-btn" title="Send repeated messages">🚀 Send Spam</button>
      </section>
    </main>

    <footer class="footer" role="contentinfo">
      <p>Credits to <a href="https://github.com/SaeedX302/WhatsApp-Spam/" target="_blank" rel="noopener noreferrer">༯𝙎ค૯𝙀𝘿</a></p>
    </footer>
  </div>

  <script>
    // Initialize theme on load (keeps UI-only changes here)
    (function () {
      const toggle = document.getElementById('themeToggle');
      const savedTheme = localStorage.getItem('theme') || 'dark';
      document.body.classList.remove('light-mode', 'dark-mode');
      document.body.classList.add(`${savedTheme}-mode`);
      toggle.checked = savedTheme === 'light';

      // Keep behavior simple: update class and localStorage on change
      toggle.addEventListener('change', () => {
        const mode = toggle.checked ? 'light' : 'dark';
        document.body.classList.remove('light-mode', 'dark-mode');
        document.body.classList.add(`${mode}-mode`);
        localStorage.setItem('theme', mode);
      });

      // Basic accessible tab keyboard handling
      const tab1Btn = document.getElementById('tab1Btn');
      const tab2Btn = document.getElementById('tab2Btn');
      const tab1 = document.getElementById('tab1');
      const tab2 = document.getElementById('tab2');

      function activateTab(tabBtn, tabPanel) {
        // buttons
        [tab1Btn, tab2Btn].forEach(b => {
          b.classList.toggle('active', b === tabBtn);
          b.setAttribute('aria-selected', b === tabBtn ? 'true' : 'false');
        });

        // panels
        [tab1, tab2].forEach(p => {
          if (p === tabPanel) {
            p.classList.add('active');
            p.removeAttribute('hidden');
          } else {
            p.classList.remove('active');
            p.setAttribute('hidden', 'true');
          }
        });
      }

      tab1Btn.addEventListener('click', () => activateTab(tab1Btn, tab1));
      tab2Btn.addEventListener('click', () => activateTab(tab2Btn, tab2));

      // keyboard support
      [tab1Btn, tab2Btn].forEach(btn =>
        btn.addEventListener('keydown', (e) => {
          if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {
            // Switch focus between two tabs
            (btn === tab1Btn ? tab2Btn : tab1Btn).focus();
          }
        })
      );
    })();
  </script>

  <script src="popup.js"></script>
</body>
  </html>
